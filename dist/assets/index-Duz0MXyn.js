import{l as F,d as s,v as M,p as O,C as U,A as _,o as b,c as g,b as a,a3 as c,a4 as w,t as f,a5 as E,F as h,f as T,g as V,w as D,x as q,e as C}from"./index-Dng48trd.js";import{k as L}from"./driver-nEzLYb3z.js";const z={class:"flex flex-col items-center bg-gray-50 p-6 rounded-lg shadow-md max-w-md mx-auto"},I={class:"relative w-32 h-32 mb-4"},R=["src"],G={class:"text-center"},H={class:"text-gray-500"},J={class:"mt-4 w-full"},K={class:"flex justify-between py-2 border-b border-gray-200"},W={class:"flex justify-between py-2 border-b border-gray-200"},Q=["value"],X={class:"flex justify-between py-2 border-b border-gray-200"},Y=["value"],te=F({__name:"index",setup(Z){const n=s("John Doe"),v=s("johndoe@example.com"),l=s(30),i=s("STUDENT"),d=s("NONE"),p=s(!1),N=[{value:"STUDENT",label:"Estudiante"},{value:"PROFESSIONAL",label:"Profesional (computación) "},{value:"WORKER",label:"Trabajador de otra área"},{value:"NONE",label:"Prefiero no decir"}],B=[{value:"MALE",label:"Masculino"},{value:"FEMALE",label:"Femenino"},{value:"NONE",label:"Prefiero no decir"}],S=s("https://via.placeholder.com/150"),{user:m,change_user:k}=M(),x=O(),A=async()=>{p.value=!0;const r={username:n.value,email:v.value,age:l.value,gender:d.value,institutional_level:i.value},{error:e}=await _.from("user").update([r]).eq("id",m.id);if(p.value=!1,!e){x.add({severity:"success",summary:"Editado",detail:"usuario editado con éxito",life:3e3});const o={...m};o.name=n.value,await k(o)}};U(async()=>{const{data:r,error:e}=await _.from("user").select("username,email,age,gender,institutional_level").eq("id",m.id);if(r){const{username:o,email:t,age:y,gender:u,institutional_level:j}=r[0];n.value=o,v.value=t,l.value=y,i.value=j,d.value=u}else x.add({severity:"error",summary:"Info",detail:"Ocurrió un error",life:3e3});P()});function P(){L({showProgress:!0,smoothScroll:!0,animate:!0,steps:[{popover:{title:"Perfil de Usuario",description:"Aquí podrá consultar o editar su información, por favor agrege la más posible",position:"center",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"}},{element:"#pv_id_1_3 ",popover:{title:"Acciones del perfil",description:"Desde aquí podrá cerrar sesión e ingresar al apartado de notas donde nos puede dejar feedback :)",position:"top",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"},onHighlightStarted:(o,t,y)=>{const u=new MouseEvent("click",{bubbles:!0,cancelable:!0});o.dispatchEvent(u),console.log(o,o.dispatchEvent(u))}}]}).drive()}return(r,e)=>{const o=q("Button");return b(),g("div",z,[a("div",I,[a("img",{src:S.value,alt:"Profile Picture",class:"rounded-full border-4 border-primary object-cover w-full h-full"},null,8,R)]),a("div",G,[c(a("input",{type:"text",class:"bg-gray-50 font-extrabold text-xl text-center border-b-zinc-100","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t)},null,512),[[w,n.value]]),a("p",H,f(v.value),1)]),a("div",J,[a("div",K,[e[4]||(e[4]=a("span",{class:"text-gray-600"},"Edad:",-1)),c(a("input",{type:"number",class:"bg-gray-50 text-gray-800 text-end border-b-zinc-100","onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t)},null,512),[[w,l.value]])]),a("div",W,[e[5]||(e[5]=a("span",{class:"text-gray-600"},"Nivel institucional:",-1)),c(a("select",{class:"bg-gray-50 text-end border-none focus:border-none",name:"",id:"","onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t)},[(b(),g(h,null,T(N,t=>a("option",{class:"border-none p-4 text-center",key:t.value,value:t.value},f(t.label),9,Q)),64))],512),[[E,i.value]])]),a("div",X,[e[6]||(e[6]=a("span",{class:"text-gray-600"},"Género:",-1)),c(a("select",{class:"bg-gray-50 text-end font-medium border-none focus:border-none",name:"",id:"","onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t)},[(b(),g(h,null,T(B,t=>a("option",{class:"border-none p-4 text-center",key:t.value,value:t.value},f(t.label),9,Y)),64))],512),[[E,d.value]])])]),V(o,{loading:p.value,onClick:A,class:"mt-6 px-4 py-2 text-white bg-primary hover:bg-primary-dark rounded-md shadow-md transition duration-300"},{default:D(()=>e[7]||(e[7]=[C(" Editar Perfil ")])),_:1},8,["loading"])])}}});export{te as default};
