import{P as x,s as c}from"./supabase-CTLQoQ3I.js";import{d as h,u as C,r as l,a as B,o as V,c as k,b as t,e as n,w as I,f as u,g as L}from"./index-6ub7yXZy.js";import"./_commonjsHelpers-C4iS2aBk.js";const P={class:"grid grid-cols-1 md:grid-cols-2 lg:w-3/5"},E={class:"flex flex-col gap-6 py-6 px-3 items-center md:start-start"},F={class:"w-full flex flex-col gap-2"},N=h({__name:"Login",setup(M){const m=C(),f=L(),a=l(null),r=l(null),d=l(""),i=l(!1),p=s=>{m.add({severity:"error",summary:"Info",detail:s,life:3e3})},g=B(()=>{var s;return((s=r.value)==null?void 0:s.points.length)==5&&a.value});async function v(){if(!a.value){p("Rellene todos los campos");return}const s={email:a.value,password:r.value};i.value=!0;try{const{data:e}=await c.functions.invoke("passpoints-login",{body:s});console.log(e),!e||!e.success?p(b(e.message)):(c.auth.setSession(e.session),f.push({name:"notes"}))}catch(e){console.log(e)}i.value=!1}function b(s){if(s=="Error al registrar en Supabase Auth: A user with this email address has already been registered")return"Ya hay una cuenta para este usuario";if(s=="Passwords dont Match")return"Las ContraseÃ±as deben coincidir"}return(s,e)=>{const w=u("Input"),_=u("FloatLabel"),y=u("Button");return V(),k("div",P,[t("div",E,[n(_,{class:"w-full"},{default:I(()=>[e[3]||(e[3]=t("label",{for:"mail"},"Mail",-1)),n(w,{id:"mail",type:"email",class:"w-full",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o)},null,8,["modelValue"])]),_:1}),n(y,{class:"w-full",type:"button",disabled:!g.value,label:"Registrar",loading:i.value,onClick:v},null,8,["disabled","loading"])]),t("div",F,[t("div",null,[e[4]||(e[4]=t("label",{for:"passpoints1"},"Passpoints",-1)),n(x,{id:"passpoint1","onUpdate:image":e[1]||(e[1]=o=>d.value=o),image:d.value,"onUpdate:passpoints":e[2]||(e[2]=o=>r.value=o)},null,8,["image"])])])])}}});export{N as default};
