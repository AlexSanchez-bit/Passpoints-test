import{P as w}from"./PasspointCollector-1VrHFifk.js";import{d as B,u as I,r,a as N,o as R,c as k,b as a,e as n,w as x,i as A,s as E,g as c,h as F,j as L}from"./index-D-lmwhU3.js";const M={class:"grid grid-cols-1 md:grid-cols-2 lg:w-3/5"},S={class:"flex flex-col gap-6 py-6 px-3 items-center md:start-start"},_={class:"flex flex-col"},j={class:"flex items-center gap-2"},q={class:"w-full flex flex-col gap-2"},h=B({__name:"Register",setup(z){const V=I(),y=F(),u=r(null),i=r(null),v=r(!1),p=r(null),d=r(null),m=r(""),f=r(!1),g=l=>{V.add({severity:"error",summary:"Info",detail:l,life:3e3})},C=N(()=>{var l,e,t;return v.value&&((l=p.value)==null?void 0:l.points.length)==((e=d.value)==null?void 0:e.points.length)&&((t=d.value)==null?void 0:t.points.length)==5&&!(!u.value||!i.value)});async function U(){var e,t;if(((e=p.value)==null?void 0:e.image.name)!=((t=d.value)==null?void 0:t.image.name)){g("Por favor use una sola imagen");return}if(!u.value||!i.value){g("Rellene todos los campos");return}const l={username:u.value,email:i.value,password:p.value,passwordConfirmation:d.value};f.value=!0;try{const{data:o,error:b}=useAuthStorage().register(l);o&&!o.success?g(P(o.message)):(E.auth.setSession(o.session),y.push({name:"notes"}))}catch(o){console.log(o)}f.value=!1}function P(l){if(l=="Error al registrar en Supabase Auth: A user with this email address has already been registered")return"Ya hay una cuenta para este usuario";if(l=="Passwords dont Match")return"Las Contraseñas deben coincidir"}return(l,e)=>{const t=c("Input"),o=c("FloatLabel"),b=c("Button");return R(),k("div",M,[a("div",S,[n(o,{class:"w-full"},{default:x(()=>[e[7]||(e[7]=a("label",{for:"name"},"Name",-1)),n(t,{id:"name",class:"w-full",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s)},null,8,["modelValue"])]),_:1}),n(o,{class:"w-full"},{default:x(()=>[e[8]||(e[8]=a("label",{for:"mail"},"Mail",-1)),n(t,{id:"mail",type:"email",class:"w-full",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s)},null,8,["modelValue"])]),_:1}),a("div",_,[a("div",j,[n(A(L),{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),inputId:"share",id:"share",binary:""},null,8,["modelValue"]),e[9]||(e[9]=a("label",{for:"share"}," Compartir mis datos ",-1))]),e[10]||(e[10]=a("small",{class:"text-zinc-400"},"al aceptar sus datos como contraseñas seràn empleados para llevar a cabo un estudio de seguridad sobre este sistema",-1))]),n(b,{type:"button",disabled:!C.value,label:"Registrar",loading:f.value,onClick:U},null,8,["disabled","loading"])]),a("div",q,[a("div",null,[e[11]||(e[11]=a("label",{for:"passpoints1"},"Passpoints",-1)),n(w,{id:"passpoint1","onUpdate:image":e[3]||(e[3]=s=>m.value=s),image:m.value,"onUpdate:passpoints":e[4]||(e[4]=s=>p.value=s)},null,8,["image"])]),a("div",null,[e[12]||(e[12]=a("label",{for:"passpoints2"},"Confirmar Passpoints",-1)),n(w,{id:"passpoint2",image:m.value,"onUpdate:passpoints":e[5]||(e[5]=s=>d.value=s),"onUpdate:image":e[6]||(e[6]=s=>m.value=s)},null,8,["image"])])])])}}});export{h as default};
