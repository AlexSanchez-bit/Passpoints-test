import{P as C}from"./PasspointCollector-C-mlmq2K.js";import{l as V,p as A,d as o,q as B,o as f,c as g,b as l,g as i,w as L,t as P,a as k,v as M,x as c,y as S}from"./index-BayGUjSY.js";const U={class:"grid grid-cols-1 md:grid-cols-2 lg:w-3/5"},E={class:"flex flex-col gap-6 py-6 px-3 items-center md:start-start"},F={key:0,class:"text-red-400 text-xs"},N={class:"w-full flex flex-col gap-2"},$=V({__name:"Login",setup(R){const w=A(),p=o(!1),b=S(),a=o(null),n=o(null),r=o(""),m=o(""),d=o(!1),v=s=>{w.add({severity:"error",summary:"Info",detail:s,life:3e3})},x=B(()=>{var e,u;const s=/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;return!a.value||!s.test(a.value)?r.value="Introduzca un correo válido":((e=n.value)==null?void 0:e.points.length)!=5?r.value=" La contraseña debe tener 5 puntos":r.value="",((u=n.value)==null?void 0:u.points.length)==5&&a.value&&s.test(a.value)});async function _(){if(!a.value){v("Rellene todos los campos");return}const s={email:a.value,password:n.value};d.value=!0;try{const{data:e}=await M().login(s);!e||!e.success?v(y(e.message)):b.push({name:"user-info"})}catch(e){console.log(e)}d.value=!1}function y(s){if(s=="Error al registrar en Supabase Auth: A user with this email address has already been registered")return"Ya hay una cuenta para este usuario";if(s=="Passwords dont Match")return"Las Contraseñas deben coincidir";if(s=="Invalid Password"||s=="user not found")return"Usuario o contraseña incorrectos"}return(s,e)=>{const u=c("Input"),I=c("FloatLabel"),h=c("Button");return f(),g("div",U,[l("div",E,[i(I,{class:"w-full"},{default:L(()=>[e[4]||(e[4]=l("label",{for:"mail"},"Mail",-1)),i(u,{onInput:e[0]||(e[0]=t=>p.value=!0),id:"mail",type:"email",class:"w-full",modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value=t)},null,8,["modelValue"])]),_:1}),l("div",null,[i(h,{class:"w-full",type:"button",disabled:!x.value,label:"Iniciar Sesión",loading:d.value,onClick:_},null,8,["disabled","loading"]),p.value?(f(),g("small",F,P(r.value),1)):k("",!0)])]),l("div",N,[l("div",null,[e[5]||(e[5]=l("label",{for:"passpoints1"},"Passpoints",-1)),i(C,{id:"passpoint1","onUpdate:image":e[2]||(e[2]=t=>m.value=t),image:m.value,"onUpdate:passpoints":e[3]||(e[3]=t=>n.value=t)},null,8,["image"])])])])}}});export{$ as default};
