import{P as B}from"./PasspointCollector-BivXXcPm.js";import{k as C}from"./driver-nEzLYb3z.js";import{l as F,p as V,d as l,q as z,o as E,c as P,b as a,g as r,w as b,u as I,z as L,v as U,A as _,x,y as q}from"./index-DnEh-9yN.js";const k={class:"grid grid-cols-1 md:grid-cols-2 lg:w-3/5"},D={id:"step1",class:"flex flex-col gap-6 py-6 px-3 items-center md:start-start"},R={class:"flex flex-col"},H={id:"step2",class:"flex items-center gap-2"},N={id:"step3",class:"w-full flex flex-col gap-2"},M={id:""},K=F({__name:"Register",setup(Y){const T=V(),y=q(),p=l(null),u=l(null),g=l(!1),c=l(null),d=l(null),m=l(""),v=l(!1),f=n=>{T.add({severity:"error",summary:"Info",detail:n,life:3e3})},A=z(()=>{var n,e,t;return g.value&&((n=c.value)==null?void 0:n.points.length)==((e=d.value)==null?void 0:e.points.length)&&((t=d.value)==null?void 0:t.points.length)==5&&!(!p.value||!u.value)});async function h(){var e,t;if(((e=c.value)==null?void 0:e.image.name)!=((t=d.value)==null?void 0:t.image.name)){f("Por favor use una sola imagen");return}if(!p.value||!u.value){f("Rellene todos los campos");return}const n={username:p.value,email:u.value,password:c.value,passwordConfirmation:d.value};v.value=!0;try{const{data:s,error:i}=await U().register(n);s&&!s.success?f(w(s.message)):(_.auth.setSession(s.session),y.push({name:"user-info"}))}catch(s){console.log(s)}v.value=!1}function w(n){if(n=="Error al registrar en Supabase Auth: A user with this email address has already been registered")return"Ya hay una cuenta para este usuario";if(n=="Passwords dont Match")return"Las Contraseñas deben coincidir"}localStorage.getItem("register_tutorail")==null&&(S(),localStorage.setItem("register_tutorail","checked"));function S(){C({showProgress:!0,smoothScroll:!0,animate:!0,steps:[{popover:{title:"Bienvenido",description:"Este es el registro de su contraseña basada en Passpoints",position:"center",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"}},{element:"#step1",popover:{title:"Informaciòn de Usuario",description:"Debe introducir su informaciòn de identificaciòn",position:"bottom",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"}},{element:"#step2",popover:{title:"Aceptar compartir sus datos",description:"Al usar este servicio estrà cediendo su contraseña para un estudio acadèmico sobre este sistema, no es recomendable guardar informaciòn sensible",position:"right",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"}},{element:"#step3",popover:{title:"Contraseña",description:"Aquì deberà insertar y confirmar su contraseña",position:"top",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"}},{element:"#passpoint1",popover:{title:"Introducir una contraseña",description:"Aquì deberà insertar y confirmar su contraseña,esta consistirà en una selecciòn de 5 puntos donde el orden de estos importa",position:"top",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"}},{element:"#passpoint1 .image-selector",popover:{title:"Cambiar imagen",description:"Aqui puede cambiar la imagen para su contraseña, basta con navegar y dar click en la imagen que desee",position:"top",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"}},{element:"#passpoint1 .image-change",popover:{title:"selector de imagen",description:"Activa el selector de imagen en caso de querer cambiarla",position:"top",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"},onHighlightStarted:(t,s,i)=>{console.log(t.style,t.dispatchEvent),t.classList.remove("ui")},onDeselected:(t,s,i)=>{console.log(t.style,t.dispatchEvent),t.classList.add("ui")}},{element:"#passpoint1 .toggle-show",popover:{title:"Ver puntos",description:"En esta opcion puede hacer que se muestren/oculten los puntos seleccionados",position:"top",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"},onHighlightStarted:(t,s,i)=>{console.log(t.style,t.dispatchEvent),t.classList.remove("ui")},onDeselected:(t,s,i)=>{console.log(t.style,t.dispatchEvent),t.classList.add("ui")}},{element:"#passpoint1 .toggle-fullscreen",popover:{title:"Pantalla completa",description:"Ponga el selector a pantalla completa",position:"top",nextBtnText:"Siguiente",prevBtnText:"Anterior",doneBtnText:"Finalizar"},onHighlightStarted:(t,s,i)=>{console.log(t.style,t.dispatchEvent),t.classList.remove("ui")},onDeselected:(t,s,i)=>{console.log(t.style,t.dispatchEvent),t.classList.add("ui")}}]}).drive()}return(n,e)=>{const t=x("Input"),s=x("FloatLabel"),i=x("Button");return E(),P("div",k,[a("div",D,[r(s,{class:"w-full"},{default:b(()=>[e[7]||(e[7]=a("label",{for:"name"},"Usuario",-1)),r(t,{id:"name",class:"w-full",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o)},null,8,["modelValue"])]),_:1}),r(s,{class:"w-full"},{default:b(()=>[e[8]||(e[8]=a("label",{for:"mail"},"Correo",-1)),r(t,{id:"mail",type:"email",class:"w-full",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o)},null,8,["modelValue"])]),_:1}),a("div",R,[a("div",H,[r(I(L),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),inputId:"share",binary:""},null,8,["modelValue"]),e[9]||(e[9]=a("label",{for:"share"}," Compartir mis datos ",-1))]),e[10]||(e[10]=a("small",{class:"text-zinc-400"},"al aceptar sus datos como contraseñas seràn empleados para llevar a cabo un estudio de seguridad sobre este sistema",-1))]),r(i,{type:"button",disabled:!A.value,label:"Registrar",loading:v.value,onClick:h},null,8,["disabled","loading"])]),a("div",N,[a("div",M,[e[11]||(e[11]=a("label",{for:"passpoints1"},"Passpoints",-1)),r(B,{id:"passpoint1","onUpdate:image":e[3]||(e[3]=o=>m.value=o),image:m.value,"onUpdate:passpoints":e[4]||(e[4]=o=>c.value=o)},null,8,["image"])]),a("div",null,[e[12]||(e[12]=a("label",{for:"passpoints2"},"Confirmar Passpoints",-1)),r(B,{id:"passpoint2",image:m.value,"onUpdate:passpoints":e[5]||(e[5]=o=>d.value=o),"onUpdate:image":e[6]||(e[6]=o=>m.value=o)},null,8,["image"])])])])}}});export{K as default};
