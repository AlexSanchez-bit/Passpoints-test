import{P as y}from"./PasspointCollector-B3foVsVV.js";import{l as x,p as h,d as t,q as C,o as I,c as B,b as l,g as n,w as P,v as V,x as u,y as L}from"./index-Dng48trd.js";const U={class:"grid grid-cols-1 md:grid-cols-2 lg:w-3/5"},k={class:"flex flex-col gap-6 py-6 px-3 items-center md:start-start"},A={class:"w-full flex flex-col gap-2"},S=x({__name:"Login",setup(E){const p=h(),m=L(),a=t(null),r=t(null),d=t(""),i=t(!1),c=s=>{p.add({severity:"error",summary:"Info",detail:s,life:3e3})},f=C(()=>{var s;return((s=r.value)==null?void 0:s.points.length)==5&&a.value});async function g(){if(!a.value){c("Rellene todos los campos");return}const s={email:a.value,password:r.value};i.value=!0;try{const{data:e}=await V().login(s);console.log(e),!e||!e.success?c(v(e.message)):m.push({name:"user-info"})}catch(e){console.log(e)}i.value=!1}function v(s){if(s=="Error al registrar en Supabase Auth: A user with this email address has already been registered")return"Ya hay una cuenta para este usuario";if(s=="Passwords dont Match")return"Las Contraseñas deben coincidir";if(s=="Invalid Password"||s=="user not found")return"Usuario o contraseña incorrectos"}return(s,e)=>{const w=u("Input"),_=u("FloatLabel"),b=u("Button");return I(),B("div",U,[l("div",k,[n(_,{class:"w-full"},{default:P(()=>[e[3]||(e[3]=l("label",{for:"mail"},"Mail",-1)),n(w,{id:"mail",type:"email",class:"w-full",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o)},null,8,["modelValue"])]),_:1}),n(b,{class:"w-full",type:"button",disabled:!f.value,label:"Iniciar Sesiòn",loading:i.value,onClick:g},null,8,["disabled","loading"])]),l("div",A,[l("div",null,[e[4]||(e[4]=l("label",{for:"passpoints1"},"Passpoints",-1)),n(y,{id:"passpoint1","onUpdate:image":e[1]||(e[1]=o=>d.value=o),image:d.value,"onUpdate:passpoints":e[2]||(e[2]=o=>r.value=o)},null,8,["image"])])])])}}});export{S as default};
